!function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=11)}([function(t,e,n){var r=n(5);r.Template=n(6).Template,r.template=r.Template,t.exports=r},function(t,e,n){var r=n(0);t.exports=function(){return new r.Template({code:function(t,e,n){var r=this;return r.b(n=n||""),r.b("<form>\r"),r.b("\n"+n),r.b('    <div class="form-group">\r'),r.b("\n"+n),r.b('        <input type="text" class="form-control" id="name" data-selector="name" placeholder="name">\r'),r.b("\n"+n),r.b("    </div>\r"),r.b("\n"+n),r.b('    <div class="form-group">\r'),r.b("\n"+n),r.b('        <textarea class="form-control" placeholder="Write a comment..." rows="3" data-selector="text"></textarea>\r'),r.b("\n"+n),r.b("    </div>\r"),r.b("\n"+n),r.b('    <div class="form-group">\r'),r.b("\n"+n),r.b('        <button type="button" class="btn btn-default pull-right" id = "cancel">Cancel</button>\r'),r.b("\n"+n),r.b('        <button type="submit" class="btn btn-default pull-right" id = "post">Post</button>\r'),r.b("\n"+n),r.b("    </div>\r"),r.b("\n"+n),r.b("    <br>\r"),r.b("\n"+n),r.b("</form>"),r.fl()},partials:{},subs:{}},'<form>\r\n    <div class="form-group">\r\n        <input type="text" class="form-control" id="name" data-selector="name" placeholder="name">\r\n    </div>\r\n    <div class="form-group">\r\n        <textarea class="form-control" placeholder="Write a comment..." rows="3" data-selector="text"></textarea>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="button" class="btn btn-default pull-right" id = "cancel">Cancel</button>\r\n        <button type="submit" class="btn btn-default pull-right" id = "post">Post</button>\r\n    </div>\r\n    <br>\r\n</form>',r)}()},function(t,e,n){var r=n(0);t.exports=function(){return new r.Template({code:function(t,e,n){var r=this;return r.b(n=n||""),r.b('<li class="list-group-item" id="'),r.b(r.v(r.f("id",t,e,0))),r.b('">\r'),r.b("\n"+n),r.b('    <a href="#" class="pull-left">\r'),r.b("\n"+n),r.b('        <img src="/comments/imgs/photo.jpg" alt="" class="avatar avatar-32 img-circle">\r'),r.b("\n"+n),r.b("    </a>\r"),r.b("\n"+n),r.b('    <div class="post">\r'),r.b("\n"+n),r.b('        <span class="text-muted pull-right">\r'),r.b("\n"+n),r.b('            <small class="text-muted">'),r.b(r.v(r.f("time",t,e,0))),r.b("</small>\r"),r.b("\n"+n),r.b('            <button type="button" class="btn btn-xs" id="remove-comment" data-key="'),r.b(r.v(r.f("id",t,e,0))),r.b('" title="Remove">\r'),r.b("\n"+n),r.b('                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\r'),r.b("\n"+n),r.b("            </button>\r"),r.b("\n"+n),r.b('            <button type="button" class="btn btn-xs" id="reply-comment" data-key="'),r.b(r.v(r.f("id",t,e,0))),r.b('" title="Reply">\r'),r.b("\n"+n),r.b('                <span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span>\r'),r.b("\n"+n),r.b("            </button>\r"),r.b("\n"+n),r.b("        </span>\r"),r.b("\n"+n),r.b('        <strong class="text-success">'),r.b(r.v(r.f("name",t,e,0))),r.b("</strong>\r"),r.b("\n"+n),r.b("        <p>\r"),r.b("\n"+n),r.b("            "),r.b(r.v(r.f("text",t,e,0))),r.b("\r"),r.b("\n"+n),r.b("        </p>\r"),r.b("\n"+n),r.b("    </div>\r"),r.b("\n"+n),r.b('    <div class="reply"></div>\r'),r.b("\n"+n),r.b("</li>"),r.fl()},partials:{},subs:{}},'<li class="list-group-item" id="{{id}}">\r\n    <a href="#" class="pull-left">\r\n        <img src="/comments/imgs/photo.jpg" alt="" class="avatar avatar-32 img-circle">\r\n    </a>\r\n    <div class="post">\r\n        <span class="text-muted pull-right">\r\n            <small class="text-muted">{{time}}</small>\r\n            <button type="button" class="btn btn-xs" id="remove-comment" data-key="{{id}}" title="Remove">\r\n                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\r\n            </button>\r\n            <button type="button" class="btn btn-xs" id="reply-comment" data-key="{{id}}" title="Reply">\r\n                <span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span>\r\n            </button>\r\n        </span>\r\n        <strong class="text-success">{{name}}</strong>\r\n        <p>\r\n            {{text}}\r\n        </p>\r\n    </div>\r\n    <div class="reply"></div>\r\n</li>',r)}()},function(t,e,n){var r=n(0);t.exports=function(){return new r.Template({code:function(t,e,n){var r=this;return r.b(n=n||""),r.b('<ul class="list-group">\r'),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b("</ul>"),r.fl()},partials:{},subs:{}},'<ul class="list-group">\r\n\r\n</ul>',r)}()},function(t,e,n){var r=n(0);t.exports=function(){return new r.Template({code:function(t,e,n){var r=this;return r.b(n=n||""),r.b('<div class="row bootstrap snippets">\r'),r.b("\n"+n),r.b('    <div class="col-md-6 col-md-offset-2 col-sm-12">\r'),r.b("\n"+n),r.b('        <div class="comment-wrapper">\r'),r.b("\n"+n),r.b('            <div class="panel panel-info">\r'),r.b("\n"+n),r.b('                <div class="panel-heading">\r'),r.b("\n"+n),r.b("                    Comment panel\r"),r.b("\n"+n),r.b("                </div>\r"),r.b("\n"+n),r.b('                <div class="panel-body">\r'),r.b("\n"+n),r.b('                    <div data-component="form">'),r.b(r.v(r.f("form",t,e,0))),r.b(" </div>\r"),r.b("\n"+n),r.b('                    <div class="clearfix"></div>\r'),r.b("\n"+n),r.b('                    <div class="loader"></div>\r'),r.b("\n"+n),r.b("                    <hr>\r"),r.b("\n"+n),r.b('                    <div data-component="feed">'),r.b(r.v(r.f("comments",t,e,0))),r.b("</div>\r"),r.b("\n"+n),r.b("                </div>\r"),r.b("\n"+n),r.b("            </div>\r"),r.b("\n"+n),r.b("        </div>\r"),r.b("\n"+n),r.b("\r"),r.b("\n"+n),r.b("    </div>\r"),r.b("\n"+n),r.b("</div>"),r.fl()},partials:{},subs:{}},'<div class="row bootstrap snippets">\r\n    <div class="col-md-6 col-md-offset-2 col-sm-12">\r\n        <div class="comment-wrapper">\r\n            <div class="panel panel-info">\r\n                <div class="panel-heading">\r\n                    Comment panel\r\n                </div>\r\n                <div class="panel-body">\r\n                    <div data-component="form">{{form}} </div>\r\n                    <div class="clearfix"></div>\r\n                    <div class="loader"></div>\r\n                    <hr>\r\n                    <div data-component="feed">{{comments}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>',r)}()},function(t,e,n){!function(h){var v=/\S/,e=/\"/g,n=/\n/g,r=/\r/g,o=/\\/g,i=/\u2028/,a=/\u2029/;function y(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function g(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function _(t,e,n){if(e.charAt(n)!=t.charAt(0))return!1;for(var r=1,o=t.length;r<o;r++)if(e.charAt(n+r)!=t.charAt(r))return!1;return!0}h.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},h.scan=function(t,e){var n=t.length,r=0,o=null,i=null,a="",s=[],c=!1,u=0,l=0,f="{{",p="}}";function m(){0<a.length&&(s.push({tag:"_t",text:new String(a)}),a="")}function b(t,e){if(m(),t&&function(){for(var t=!0,e=l;e<s.length;e++)if(!(t=h.tags[s[e].tag]<h.tags._v||"_t"==s[e].tag&&null===s[e].text.match(v)))return!1;return t}())for(var n,r=l;r<s.length;r++)s[r].text&&((n=s[r+1])&&">"==n.tag&&(n.indent=s[r].text.toString()),s.splice(r,1));else e||s.push({tag:"\n"});c=!1,l=s.length}function d(t,e){var n="="+p,r=t.indexOf(n,e),o=g(t.substring(t.indexOf("=",e)+1,r)).split(" ");return f=o[0],p=o[o.length-1],r+n.length-1}for(e&&(e=e.split(" "),f=e[0],p=e[1]),u=0;u<n;u++)0==r?_(f,t,u)?(--u,m(),r=1):"\n"==t.charAt(u)?b(c):a+=t.charAt(u):1==r?(u+=f.length-1,r="="==(o=(i=h.tags[t.charAt(u+1)])?t.charAt(u+1):"_v")?(u=d(t,u),0):(i&&u++,2),c=u):_(p,t,u)?(s.push({tag:o,n:g(a),otag:f,ctag:p,i:"/"==o?c-f.length:u+p.length}),a="",u+=p.length-1,r=0,"{"==o&&("}}"==p?u++:y(s[s.length-1]))):a+=t.charAt(u);return b(c,!0),s};var u={_t:!0,"\n":!0,$:!0,"/":!0};function l(t,e){for(var n=0,r=e.length;n<r;n++)if(e[n].o==t.n)return t.tag="#",!0}function f(t,e,n){for(var r=0,o=n.length;r<o;r++)if(n[r].c==t&&n[r].o==e)return!0}function s(t){var e=[];for(var n in t.partials)e.push('"'+p(n)+'":{name:"'+p(t.partials[n].name)+'", '+s(t.partials[n])+"}");return"partials: {"+e.join(",")+"}, subs: "+function(t){var e=[];for(var n in t)e.push('"'+p(n)+'": function(c,p,t,i) {'+t[n]+"}");return"{ "+e.join(",")+" }"}(t.subs)}h.stringify=function(t,e,n){return"{code: function (c,p,i) { "+h.wrapMain(t.code)+" },"+s(t)+"}"};var c=0;function p(t){return t.replace(o,"\\\\").replace(e,'\\"').replace(n,"\\n").replace(r,"\\r").replace(i,"\\u2028").replace(a,"\\u2029")}function m(t){return~t.indexOf(".")?"d":"f"}function b(t,e){var n="<"+(e.prefix||"")+t.n+c++;return e.partials[n]={name:t.n,partials:{}},e.code+='t.b(t.rp("'+p(n)+'",c,p,"'+(t.indent||"")+'"));',n}function t(t,e){e.code+="t.b(t.t(t."+m(t.n)+'("'+p(t.n)+'",c,p,0)));'}function d(t){return"t.b("+t+");"}h.generate=function(t,e,n){c=0;var r={code:"",subs:{},partials:{}};return h.walk(t,r),n.asString?this.stringify(r,e,n):this.makeTemplate(r,e,n)},h.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"},h.template=h.Template,h.makeTemplate=function(t,e,n){var r=this.makePartials(t);return r.code=new Function("c","p","i",this.wrapMain(t.code)),new this.template(r,e,this,n)},h.makePartials=function(t){var e,n={subs:{},partials:t.partials,name:t.name};for(e in n.partials)n.partials[e]=this.makePartials(n.partials[e]);for(e in t.subs)n.subs[e]=new Function("c","p","t","i",t.subs[e]);return n},h.codegen={"#":function(t,e){e.code+="if(t.s(t."+m(t.n)+'("'+p(t.n)+'",c,p,1),c,p,0,'+t.i+","+t.end+',"'+t.otag+" "+t.ctag+'")){t.rs(c,p,function(c,p,t){',h.walk(t.nodes,e),e.code+="});c.pop();}"},"^":function(t,e){e.code+="if(!t.s(t."+m(t.n)+'("'+p(t.n)+'",c,p,1),c,p,1,0,0,"")){',h.walk(t.nodes,e),e.code+="};"},">":b,"<":function(t,e){var n={partials:{},code:"",subs:{},inPartial:!0};h.walk(t.nodes,n);var r=e.partials[b(t,e)];r.subs=n.subs,r.partials=n.partials},$:function(t,e){var n={subs:{},code:"",partials:e.partials,prefix:t.n};h.walk(t.nodes,n),e.subs[t.n]=n.code,e.inPartial||(e.code+='t.sub("'+p(t.n)+'",c,p,i);')},"\n":function(t,e){e.code+=d('"\\n"'+(t.last?"":" + i"))},_v:function(t,e){e.code+="t.b(t.v(t."+m(t.n)+'("'+p(t.n)+'",c,p,0)));'},_t:function(t,e){e.code+=d('"'+p(t.text)+'"')},"{":t,"&":t},h.walk=function(t,e){for(var n,r=0,o=t.length;r<o;r++)(n=h.codegen[t[r].tag])&&n(t[r],e);return e},h.parse=function(t,e,n){return function t(e,n,r,o){var i,a=[],s=null,c=null;for(i=r[r.length-1];0<e.length;){if(c=e.shift(),i&&"<"==i.tag&&!(c.tag in u))throw new Error("Illegal content in < super tag.");if(h.tags[c.tag]<=h.tags.$||l(c,o))r.push(c),c.nodes=t(e,c.tag,r,o);else{if("/"==c.tag){if(0===r.length)throw new Error("Closing tag without opener: /"+c.n);if(s=r.pop(),c.n!=s.n&&!f(c.n,s.n,o))throw new Error("Nesting error: "+s.n+" vs. "+c.n);return s.end=c.i,a}"\n"==c.tag&&(c.last=0==e.length||"\n"==e[0].tag)}a.push(c)}if(0<r.length)throw new Error("missing closing tag: "+r.pop().n);return a}(t,0,[],(n=n||{}).sectionTags||[])},h.cache={},h.cacheKey=function(t,e){return[t,!!e.asString,!!e.disableLambda,e.delimiters,!!e.modelGet].join("||")},h.compile=function(t,e){e=e||{};var n=h.cacheKey(t,e),r=this.cache[n];if(r){var o=r.partials;for(var i in o)delete o[i].instance;return r}return r=this.generate(this.parse(this.scan(t,e.delimiters),t,e),t,e),this.cache[n]=r}}(e)},function(t,e,n){!function(t){function l(t,e,n){var r;return e&&"object"==typeof e&&(void 0!==e[t]?r=e[t]:n&&e.get&&"function"==typeof e.get&&(r=e.get(t))),r}t.Template=function(t,e,n,r){t=t||{},this.r=t.code||this.r,this.c=n,this.options=r||{},this.text=e||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(t,e,n){return""},v:function(t){return t=s(t),a.test(t)?t.replace(e,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(o,"&#39;").replace(i,"&quot;"):t},t:s,render:function(t,e,n){return this.ri([t],e||{},n)},ri:function(t,e,n){return this.r(t,e,n)},ep:function(t,e){var n=this.partials[t],r=e[n.name];if(n.instance&&n.base==r)return n.instance;if("string"==typeof r){if(!this.c)throw new Error("No compiler available.");r=this.c.compile(r,this.options)}if(!r)return null;if(this.partials[t].base=r,n.subs){for(key in e.stackText||(e.stackText={}),n.subs)e.stackText[key]||(e.stackText[key]=void 0!==this.activeSub&&e.stackText[this.activeSub]?e.stackText[this.activeSub]:this.text);r=function(t,e,n,r,o,i){function a(){}function s(){}var c;s.prototype=(a.prototype=t).subs;var u=new a;for(c in u.subs=new s,u.subsText={},u.buf="",r=r||{},u.stackSubs=r,u.subsText=i,e)r[c]||(r[c]=e[c]);for(c in r)u.subs[c]=r[c];for(c in o=o||{},u.stackPartials=o,n)o[c]||(o[c]=n[c]);for(c in o)u.partials[c]=o[c];return u}(r,n.subs,n.partials,this.stackSubs,this.stackPartials,e.stackText)}return this.partials[t].instance=r},rp:function(t,e,n,r){var o=this.ep(t,n);return o?o.ri(e,n,r):""},rs:function(t,e,n){var r=t[t.length-1];if(f(r))for(var o=0;o<r.length;o++)t.push(r[o]),n(t,e,this),t.pop();else n(t,e,this)},s:function(t,e,n,r,o,i,a){var s;return(!f(t)||0!==t.length)&&("function"==typeof t&&(t=this.ms(t,e,n,r,o,i,a)),s=!!t,!r&&s&&e&&e.push("object"==typeof t?t:e[e.length-1]),s)},d:function(t,e,n,r){var o,i=t.split("."),a=this.f(i[0],e,n,r),s=this.options.modelGet,c=null;if("."===t&&f(e[e.length-2]))a=e[e.length-1];else for(var u=1;u<i.length;u++)a=void 0!==(o=l(i[u],a,s))?(c=a,o):"";return!(r&&!a)&&(r||"function"!=typeof a||(e.push(c),a=this.mv(a,e,n),e.pop()),a)},f:function(t,e,n,r){for(var o=!1,i=!1,a=this.options.modelGet,s=e.length-1;0<=s;s--)if(void 0!==(o=l(t,e[s],a))){i=!0;break}return i?(r||"function"!=typeof o||(o=this.mv(o,e,n)),o):!r&&""},ls:function(t,e,n,r,o){var i=this.options.delimiters;return this.options.delimiters=o,this.b(this.ct(s(t.call(e,r)),e,n)),this.options.delimiters=i,!1},ct:function(t,e,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(e,n)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,e,n,r,o,i,a){var s,c=e[e.length-1],u=t.call(c);return"function"==typeof u?!!r||(s=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(u,c,n,s.substring(o,i),a)):u},mv:function(t,e,n){var r=e[e.length-1],o=t.call(r);return"function"==typeof o?this.ct(s(o.call(r)),r,n):o},sub:function(t,e,n,r){var o=this.subs[t];o&&(this.activeSub=t,o(e,n,this,r),this.activeSub=!1)}};var e=/&/g,n=/</g,r=/>/g,o=/\'/g,i=/\"/g,a=/[&<>\"\']/;function s(t){return String(null==t?"":t)}var f=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}(e)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,null,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return fetch(t).then(function(t){return t.json()})})},{key:"update",value:function(t,e){return fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}}]),t}();function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,null,[{key:"apiUrl",value:function(){return"https://api.jsonbin.io/b/5eaa934407d49135ba482894"}}]),t}();function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"on",value:function(t,e){this._$element.addEventListener(t,e)}},{key:"_trigger",value:function(t,e){var n=new CustomEvent(t,{detail:e});this._$element.dispatchEvent(n)}},{key:"_createElement",value:function(t,e){var n=document.createElement("div");return n.innerHTML=t.render(e),n.firstElementChild}}],[{key:"hideElements",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){t&&t.classList&&!t.classList.contains("d-none")&&t.classList.add("d-none")})}},{key:"showElements",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){t&&t.classList&&t.classList.contains("d-none")&&t.classList.remove("d-none")})}},{key:"timeAgo",value:function(t){if(!t)return null;var l=["January","February","March","April","May","June","July","August","September","October","November","December"],e="object"===f(t)?t:new Date(t),n=new Date,r=new Date(n-864e5),o=Math.round((n-e)/1e3),i=Math.round(o/60),a=n.toDateString()===e.toDateString(),s=r.toDateString()===e.toDateString(),c=n.getFullYear()===e.getFullYear();function u(t,e,n){var r=1<arguments.length&&void 0!==e&&e,o=2<arguments.length&&void 0!==n&&n,i=t.getDate(),a=l[t.getMonth()],s=t.getFullYear(),c=t.getHours(),u=t.getMinutes();return u<10&&(u="0".concat(u)),r?"".concat(r," at ").concat(c,":").concat(u):o?"".concat(i,". ").concat(a," at ").concat(c,":").concat(u):"".concat(i,". ").concat(a," ").concat(s,". at ").concat(c,":").concat(u)}return o<5?"now":o<60?"".concat(o," seconds ago"):o<90?"about a minute ago":i<60?"".concat(i," minutes ago"):a?u(e,"Today"):s?u(e,"Yesterday"):c?u(e,!1,!0):u(e)}}]),t}(),u=n(1),l=n.n(u);n(7);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(){function r(t){var e;return function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(t),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=function(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?b(t):e}(this,m(r).call(this)))._$element=e._createElement(l.a),e._$name=e._$element.querySelector('[data-selector="name"]'),e._$text=e._$element.querySelector('[data-selector="text"]'),e._$name.addEventListener("keypress",e._inputHandler.bind(b(e))),e._$text.addEventListener("keypress",e._inputHandler.bind(b(e))),e._$element.addEventListener("submit",e._submitHandler.bind(b(e))),e._$element.querySelector("#cancel").addEventListener("click",e._cancelHandler.bind(b(e))),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(r,c),h(r,[{key:"name",set:function(t){this._$name.value=t},get:function(){return this._$name.value}},{key:"text",set:function(t){this._$text.value=t},get:function(){return this._$text.value}},{key:"$element",get:function(){return this._$element}}]),h(r,[{key:"_inputHandler",value:function(t){t.target.parentNode.classList.contains("has-error")&&t.target.parentNode.classList.remove("has-error")}},{key:"_submitHandler",value:function(t){if(t.preventDefault(),this._inputValidation(this._$name)&&this._inputValidation(this._$text)){var e=this._$element.parentNode,n={id:r._generateId(),reid:e&&"LI"===e.tagName?e.id:null,time:r._getCurrentDateAndTime(),text:this.text,author:{name:this.name}};this._trigger("post-comment",{post:n}),this.name="",this.text=""}}},{key:"_cancelHandler",value:function(){this._trigger("cancel-comment"),this.name="",this.text=""}},{key:"_inputValidation",value:function(t){return""!==t.value||(t.parentNode.classList.add("has-error"),!1)}}],[{key:"_generateId",value:function(){return"_"+Math.random().toString(36).substr(2,9)}},{key:"_getCurrentDateAndTime",value:function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+(t.getHours()+":"+t.getMinutes()+":"+t.getSeconds())}}]),r}(),g=n(2),_=n.n(g);n(8);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),t}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=k(this,x(n).call(this)))._comment=t,e._init(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(n,c),O(n,[{key:"comment",get:function(){return this._comment}},{key:"$element",get:function(){return this._$element}}]),O(n,[{key:"_init",value:function(){var t={post:this._comment.post,id:function(){return this.post.id},name:function(){return this.post.author.name},text:function(){return this.post.text},time:function(){return c.timeAgo(this.post.time)}};this._$element=this._createElement(_.a,t),this.$element.querySelector(".post #remove-comment").addEventListener("click",this._removeOnclickHandler.bind(this)),this.$element.querySelector(".post #reply-comment").addEventListener("click",this._replyOnclickHandler.bind(this))}},{key:"_removeOnclickHandler",value:function(t){var e=t.target;"BUTTON"!==e.tagName&&(e=e.parentNode);var n=e.dataset.key;this._trigger("remove-comment",{id:n})}},{key:"_replyOnclickHandler",value:function(t){var e=this.$element;this._trigger("reply-comment",{$element:e})}}]),n}(),j=n(3),T=n.n(j);n(9);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),t}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var M=function(){function r(t){var e,n=t.posts;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=P(this,H(r).call(this)))._comments=[],e._$element=e._createElement(T.a),e.addComments(n),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(r,c),A(r,[{key:"comments",get:function(){return this._comments}},{key:"$element",get:function(){return this._$element}}]),A(r,[{key:"addComments",value:function(t){var e=this;t&&t.forEach(function(t){return e.addComment(t)})}},{key:"addComment",value:function(t){if(t){var e=new C(t);return this._comments.push(e),this._renderComment(e),e.on("remove-comment",this._removeCommentHandler.bind(this)),e.on("reply-comment",this._replyCommentHandler.bind(this)),e}}},{key:"removeComment",value:function(e){var t="#"+e,n=this._$element.querySelector(t);this._comments=this._comments.filter(function(t){return t.comment.post.id!==e}),n.parentNode.removeChild(n)}},{key:"getAllComments",value:function(){return this._comments.map(function(t){return t.comment})}},{key:"_removeCommentHandler",value:function(t){var e=t.detail.id;this.removeComment(e),this._trigger("remove-comment",{id:e})}},{key:"_replyCommentHandler",value:function(t){var e=t.detail;this._trigger("reply-comment",{item:e})}},{key:"_renderComment",value:function(t){var e=null;(t.comment.post.hasOwnProperty("reid")&&t.comment.post.reid&&(e=this._$element.querySelector("#"+t.comment.post.reid)),e)?e.querySelector(".reply").appendChild(t.$element):this._$element.appendChild(t.$element)}}]),r}(),N=n(4),D=n.n(N);n(10);function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G=a.apiUrl(),V=new(function(){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=R(this,Y(e).call(this)))._$element=t._createElement(D.a,{}),t._$form=t._$element.querySelector("[data-component='form']"),t._fetchComments(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(e,c),J(e,[{key:"$element",get:function(){return this._$element}}]),J(e,[{key:"_fetchComments",value:function(){var e=this;o.fetch(G).then(function(t){e._renderFeed(t),e._initForm(),e._removeLoader()})}},{key:"_initForm",value:function(){this._form=new y({}),this._$form.appendChild(this._form.$element),this._form.on("post-comment",this._postCommentHandler.bind(this)),this._form.on("cancel-comment",this._cancelCommentHandler.bind(this))}},{key:"_removeLoader",value:function(){var t=this._$element.querySelector(".loader");t.parentNode.removeChild(t)}},{key:"_renderFeed",value:function(t){this._feed?this._feed.addComments(t.posts||[t]):this._initFeed(t)}},{key:"_rerenderForm",value:function(t){this._form.$element.parentNode.removeChild(this._form.$element),t.appendChild(this._form.$element)}},{key:"_initFeed",value:function(t){this._feed=new M(t),this._feed.on("reply-comment",this._replyCommentHandler.bind(this)),this._feed.on("remove-comment",this._removeCommentHandler.bind(this)),this._$element.querySelector("[data-component='feed']").appendChild(this._feed.$element)}},{key:"_postCommentHandler",value:function(t){var e=t.detail;this._renderFeed(e),this._rerenderForm(this._$form),o.update(G,this._formatPosts())}},{key:"_cancelCommentHandler",value:function(){this._rerenderForm(this._$form)}},{key:"_replyCommentHandler",value:function(t){var e=t.detail;this._rerenderForm(e.item.$element)}},{key:"_removeCommentHandler",value:function(){o.update(G,this._formatPosts())}},{key:"_formatPosts",value:function(){return{posts:this._feed.getAllComments()}}}]),e}());document.body.appendChild(V.$element)}]);
